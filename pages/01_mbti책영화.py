# app.py
import streamlit as st

st.set_page_config(page_title="MBTI 북·무비 추천", page_icon="📚🎬", layout="centered")

mbti_recs = {
    "ISTJ": {
        "books": [
            ("작은 습관의 힘", "꾸준함과 실천을 좋아하는 ISTJ에게 실용적인 습관 팁을 줘요."),
            ("총, 균, 쇠", "세밀한 관찰과 논리를 즐기는 분들에게 깊이 있는 역사 통찰을 줍니다.")
        ],
        "movies": [
            ("셜록 홈즈 (탐정물)", "논리와 사실로 문제를 푸는 과정이 매력적이에요."),
            ("마션", "계획하고 실행하는 걸 좋아하는 사람에게 딱!")
        ]
    },
    "ISFJ": {
        "books": [
            ("나미야 잡화점의 기적", "따뜻한 인간애와 책임감을 느끼는 ISFJ에게 위로를 줘요."),
            ("아낌없이 주는 나무", "보호하고 돌보는 성향에 잘 맞는 감성 책.")
        ],
        "movies": [
            ("인턴", "배려와 헌신을 주제로 한 따뜻한 이야기."),
            ("월터의 상상은 현실이 된다", "소소한 친절과 용기가 큰 변화를 만드는 걸 보여줘요.")
        ]
    },
    "INFJ": {
        "books": [
            ("데미안", "내면 세계와 성장에 관심 많은 INFJ에게 추천해요."),
            ("인간 실격", "깊은 감정과 자기 성찰을 자극하는 소설.")
        ],
        "movies": [
            ("이터널 선샤인", "내면의 고통과 관계의 심리를 섬세하게 그려요."),
            ("어댑테이션", "창의적이고 복잡한 내면을 건드리는 작품.")
        ]
    },
    "INTJ": {
        "books": [
            ("사피엔스", "큰 그림을 보는 INTJ에게 역사/시스템 통찰을 줍니다."),
            ("전략의 기술", "계획·전략을 좋아하는 분들에게 유용해요.")
        ],
        "movies": [
            ("인셉션", "복잡한 구조와 치밀한 플롯을 즐길 수 있어요."),
            ("매트릭스", "철학적이고 전략적인 세계관이 매력적입니다.")
        ]
    },
    "ISTP": {
        "books": [
            ("아웃라이어", "실제 사례와 문제 해결을 좋아하는 ISTP에게 추천."),
            ("총기와 특성의 역사", "기술적 · 현실적인 주제에 흥미를 느낄 수 있어요.")
        ],
        "movies": [
            ("분노의 질주", "액션과 즉흥 문제 해결 장면이 짜릿해요."),
            ("007 시리즈", "현장감 있는 기지와 기술 묘사가 매력적입니다.")
        ]
    },
    "ISFP": {
        "books": [
            ("바람의 노래를 들어라", "감성적이고 예술적인 분위기를 좋아하는 분께."),
            ("모모", "순수한 감성과 현재의 소중함을 일깨워주는 책.")
        ],
        "movies": [
            ("러브 액츄얼리", "감정의 세밀한 흐름과 따뜻함이 좋아요."),
            ("비포 선라이즈", "감성적 대화와 순간의 연결을 좋아하는 분께.")
        ]
    },
    "INFP": {
        "books": [
            ("연금술사", "꿈과 의미를 찾는 INFP에게 영감을 줘요."),
            ("포레스트 검프", "순수함과 삶의 우연성에 공감할 수 있어요.")
        ],
        "movies": [
            ("이터널 선샤인", "감정의 깊이와 자기 탐구를 자극해요."),
            ("아멜리에", "따뜻하고 판타지 같은 감성이 매력적입니다.")
        ]
    },
    "INTP": {
        "books": [
            ("호모 데우스", "사고 실험과 이론적 통찰을 즐기는 INTP에게 좋아요."),
            ("공리주의와 윤리학 입문", "논리적 질문을 좋아하는 분께 추천.")
        ],
        "movies": [
            ("소셜 네트워크", "아이디어와 논리로 세상을 바꾸는 이야기가 흥미로워요."),
            ("트루먼 쇼", "현실과 인식에 대한 철학적 질문을 던집니다.")
        ]
    },
    "ESTP": {
        "books": [
            ("아웃라이더", "모험과 행동 중심의 이야기를 좋아하는 분께."),
            ("스피드", "빠른 전개와 실전 감각을 즐기는 분에게 추천.")
        ],
        "movies": [
            ("매드 맥스: 분노의 도로", "시원한 액션과 즉흥성이 매력적이에요."),
            ("존 윅", "직설적이고 빠른 템포의 복수극을 즐길 분께.")
        ]
    },
    "ESFP": {
        "books": [
            ("먹고 기도하고 사랑하라", "즐겁고 감각적인 삶을 사랑하는 분들께."),
            ("브리짓 존스의 일기", "유머와 인간미가 풍부한 로맨스 코미디.")
        ],
        "movies": [
            ("라라랜드", "음악·감성·현장의 에너지가 풍부해요."),
            ("미스 프레지던트", "유쾌하고 밝은 에너지를 주는 영화.")
        ]
    },
    "ENFP": {
        "books": [
            ("당신 인생의 이야기", "창의적 상상과 감성적 연결을 좋아하는 분께."),
            ("빅매직", "창의성을 북돋아주는 에세이.")
        ],
        "movies": [
            ("빅 피쉬", "환상적이고 창의적인 이야기 구조가 매력적이에요."),
            ("월-E", "감성적 상상력이 풍부한 작품.")
        ]
    },
    "ENTP": {
        "books": [
            ("플랫폼 레볼루션", "아이디어와 혁신을 즐기는 ENTP에게 영감을 줍니다."),
            ("토론의 기술", "논쟁과 기발한 사고를 즐기는 분께.")
        ],
        "movies": [
            ("월 스트리트", "아이디어·전략·말재주가 돋보이는 영화."),
            ("인셉션", "창의적 문제 해결과 반전이 많아요.")
        ]
    },
    "ESTJ": {
        "books": [
            ("원칙", "체계와 규칙, 실행을 중시하는 ESTJ에게 추천."),
            ("리더십 수업", "조직과 관리에 관심 많은 분께 유용해요.")
        ],
        "movies": [
            ("월터의 상상은 현실이 된다", "실천과 책임을 다루는 따뜻한 이야기."),
            ("에어포스 원", "리더십과 결단 장면이 인상적입니다.")
        ]
    },
    "ESFJ": {
        "books": [
            ("사람을 얻는 기술", "관계와 배려를 중시하는 분께 실용적 팁을 줘요."),
            ("친절한 리더십", "돌봄과 책임을 잘 보여주는 책.")
        ],
        "movies": [
            ("조이: 리콜의 여왕", "가족·관계·회복을 다루는 감동 드라마."),
            ("뷰티 인사이드", "사람 사이의 연결을 아름답게 그려요.")
        ]
    },
    "ENFJ": {
        "books": [
            ("영향력", "사람을 이끄는 법과 설득을 좋아하는 ENFJ에게."),
            ("리더의 조건", "타인을 돕고 이끄는 방식을 생각하게 해줘요.")
        ],
        "movies": [
            ("죽은 시인의 사회", "영감을 주고 성장시키는 이야기."),
            ("인사이드 아웃", "감정과 공감 능력을 잘 다룬 작품.")
        ]
    },
    "ENTJ": {
        "books": [
            ("비전의 힘", "계획·목표·리더십에 관심 많은 ENTJ에게 추천."),
            ("하버드 경영 강의", "전략적 사고를 키우는 데 좋아요.")
        ],
        "movies": [
            ("울프 오브 월 스트리트", "야망과 전략이 드러나는 강렬한 이야기."),
            ("소셜 네트워크", "혁신·리더십·전략을 느낄 수 있어요.")
        ]
    }
}

st.title("📚🎬 MBTI별 책·영화 추천 (간단하고 센스있게)")
st.write("원하는 MBTI를 골라줘! 청소년 눈높이에 맞게 편하게 추천해줄게 😊")

mbti = st.selectbox("MBTI 선택", options=list(mbti_recs.keys()))

if st.button("추천 받기 ✨"):
    rec = mbti_recs.get(mbti)
    if not rec:
        st.error("추천을 찾을 수 없어요. 다른 유형을 골라볼래요?")
    else:
        st.subheader(f"추천 — {mbti}님을 위한 선택")
        st.markdown("**📖 책 (2권)**")
        for title, note in rec["books"]:
            st.markdown(f"- **{title}** — _{note}_")
        st.markdown("**🎥 영화 (2편)**")
        for title, note in rec["movies"]:
            st.markdown(f"- **{title}** — _{note}_")
        # 간단한 코멘트
        st.info("한 줄 팁: 한 권은 편하게 몰입할 책, 한 권은 생각을 자극하는 책으로 골랐어. 영화도 서로 다른 분위기로 골라봤어 — 기분 따라 골라봐! 😉")

        # 다운로드 텍스트 생성
        download_text = f"MBTI: {mbti}\n\nBooks:\n"
        for title, note in rec["books"]:
            download_text += f"- {title} — {note}\n"
        download_text += "\nMovies:\n"
        for title, note in rec["movies"]:
            download_text += f"- {title} — {note}\n"
        st.download_button("추천 목록 다운로드", data=download_text, file_name=f"{mbti}_recommendations.txt", mime="text/plain")
else:
    st.caption("아래에서 MBTI 선택 후 '추천 받기' 버튼을 눌러줘 ✨")
